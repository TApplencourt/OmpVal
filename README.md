# OmpVal

[![Build Status](https://travis-ci.org/TApplencourt/OmpVal.svg?branch=master)](https://travis-ci.org/TApplencourt/OmpVal)

## How to run

```
Omphval.sh a OpenMP test generator.
Usage:
  omphval.sh gen
  omphval.sh run [<test_folder>...]
  omphval.sh display [<result_folder>...]
  omphval.sh clean

Options:
   <test_folder> Folder to execute [default: ./tests/ ]
   <result_folder> Folder to display [default: ./result/ ]
   Use tradional flags to control the execusion (CXX, CXXFLAGS, MAKEFLAGS, OMP, OMP_TARGET_OFFLOAD, etc)

Example:
    CXX='icx' CXXFLAGS='-fiopenmp -fopenmp-targets=spir64=-fno-exceptions' MAKEFLAGS='-j8 --output-sync=target' ./run.sh run ./test/math* 
```

# How to read logs files.

When running with `run`, two log files will be create for each`test_folder`.
 
Only the code who didn't compile or run are printed when using `./run.sh -d` (see `result/icx.txt` for one example).
The error code repported are the one given by `make`. A quick tranlasion table is:

    - `Aborted` : Wrong value
    - `Killed` : Hanging, killed by `killall -9`
    - `Segmentation  fault` : ???
    - `Error 1 (ignored)` : Something else

For more information see the log file and check for the error.

# Where are the tests?!

Check `tests` folder. They can be re-generated by `gen`.
They are generated using the `.jinja2` templates located at `ompval/config/template/`.
If you don't like one test, just remove it. 

# Optional Requirement
 - python 3
 - jinja2
